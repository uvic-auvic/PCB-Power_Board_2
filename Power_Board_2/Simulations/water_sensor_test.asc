Version 4
SHEET 1 3048 2340
WIRE -1760 -992 -1792 -992
WIRE -912 -992 -944 -992
WIRE -1792 -912 -1792 -992
WIRE -944 -896 -944 -992
WIRE -432 -864 -544 -864
WIRE 80 -864 0 -864
WIRE -432 -832 -544 -832
WIRE 80 -832 0 -832
WIRE -432 -800 -480 -800
WIRE 80 -800 0 -800
WIRE -1792 -752 -1792 -832
WIRE -1792 -752 -1888 -752
WIRE -944 -752 -944 -816
WIRE -944 -752 -1040 -752
WIRE -1792 -736 -1792 -752
WIRE -944 -736 -944 -752
WIRE 1312 -672 1184 -672
WIRE 1792 -672 1664 -672
WIRE -1792 -656 -1792 -672
WIRE -1792 -656 -1888 -656
WIRE -944 -656 -944 -672
WIRE -944 -656 -1040 -656
WIRE 1312 -656 1312 -672
WIRE 1792 -656 1792 -672
WIRE -1792 -640 -1792 -656
WIRE 1136 -640 1136 -704
WIRE 1616 -640 1616 -704
WIRE -944 -624 -944 -656
WIRE 1184 -624 1184 -672
WIRE 1664 -624 1664 -672
WIRE -128 -560 -288 -560
WIRE -1792 -544 -1792 -576
WIRE -1792 -544 -1888 -544
WIRE -944 -544 -944 -560
WIRE -944 -544 -1040 -544
WIRE 1184 -544 1184 -576
WIRE 1312 -544 1312 -576
WIRE 1312 -544 1184 -544
WIRE 1664 -544 1664 -576
WIRE 1792 -544 1792 -576
WIRE 1792 -544 1664 -544
WIRE -1792 -528 -1792 -544
WIRE -128 -528 -288 -528
WIRE -944 -512 -944 -544
WIRE 1136 -512 1136 -560
WIRE 1344 -512 1136 -512
WIRE 1616 -512 1616 -560
WIRE 1616 -512 1440 -512
WIRE -128 -496 -288 -496
WIRE -128 -464 -288 -464
WIRE -1792 -432 -1792 -464
WIRE -1792 -432 -1888 -432
WIRE -944 -432 -944 -448
WIRE -944 -432 -1040 -432
WIRE -128 -432 -288 -432
WIRE -1792 -416 -1792 -432
WIRE -944 -400 -944 -432
WIRE -128 -400 -288 -400
WIRE 1344 -336 1344 -512
WIRE 1344 -336 1312 -336
WIRE -1792 -320 -1792 -352
WIRE -1792 -320 -1888 -320
WIRE -944 -320 -944 -336
WIRE -944 -320 -1040 -320
WIRE 1440 -304 1440 -512
WIRE 1440 -304 1312 -304
WIRE -1792 -288 -1792 -320
WIRE -944 -288 -944 -320
WIRE 1344 -272 1312 -272
WIRE 1792 -256 1664 -256
WIRE -128 -240 -288 -240
WIRE 688 -240 656 -240
WIRE 1792 -240 1792 -256
WIRE 1616 -224 1616 -288
WIRE -128 -208 -288 -208
WIRE 1664 -208 1664 -256
WIRE -1792 -192 -1792 -224
WIRE -1792 -192 -1888 -192
WIRE -944 -192 -944 -224
WIRE -944 -192 -1040 -192
WIRE -1792 -176 -1792 -192
WIRE -128 -176 -288 -176
WIRE -944 -160 -944 -192
WIRE -128 -144 -288 -144
WIRE 1664 -128 1664 -160
WIRE 1792 -128 1792 -160
WIRE 1792 -128 1664 -128
WIRE -128 -112 -288 -112
WIRE 1344 -96 1344 -272
WIRE 1616 -96 1616 -144
WIRE 1616 -96 1344 -96
WIRE -1792 -80 -1792 -112
WIRE -128 -80 -288 -80
WIRE -944 -64 -944 -80
WIRE -1856 176 -1904 176
WIRE -1536 192 -1568 192
WIRE -2176 208 -2304 208
WIRE -1856 208 -2128 208
WIRE -2128 224 -2128 208
WIRE -2304 240 -2304 208
WIRE -2176 240 -2176 208
WIRE 1808 256 1680 256
WIRE 1808 272 1808 256
WIRE 640 304 528 304
WIRE 1232 304 1216 304
WIRE 1680 304 1680 256
WIRE -2304 336 -2304 320
WIRE -2176 336 -2176 288
WIRE -2176 336 -2304 336
WIRE -2128 336 -2128 304
WIRE 1408 336 1216 336
WIRE -768 368 -768 352
WIRE -544 368 -544 352
WIRE -320 368 -320 352
WIRE 1248 368 1216 368
WIRE 1408 384 1408 336
WIRE 1632 384 1632 368
WIRE 1632 384 1408 384
WIRE 1680 384 1680 352
WIRE 1808 384 1808 352
WIRE 1808 384 1680 384
WIRE -2128 448 -2128 416
WIRE 528 512 528 304
WIRE -768 560 -768 528
WIRE -544 560 -544 528
WIRE -320 560 -320 528
WIRE -112 560 -112 528
WIRE 528 640 528 512
WIRE 624 640 528 640
WIRE 1072 640 1040 640
WIRE -768 672 -768 640
WIRE -544 672 -544 640
WIRE -320 672 -320 640
WIRE -112 672 -112 640
WIRE 624 672 592 672
WIRE 1072 672 1040 672
WIRE -1792 784 -1824 784
WIRE -2048 816 -2080 816
WIRE -1792 816 -1824 816
WIRE -2048 848 -2080 848
WIRE -1776 848 -1824 848
WIRE -768 880 -768 864
WIRE -544 880 -544 864
WIRE -320 880 -320 864
WIRE -112 880 -112 864
WIRE 672 944 592 944
WIRE 1024 960 960 960
WIRE 1120 960 1024 960
WIRE 1168 960 1120 960
WIRE 672 976 592 976
WIRE 1024 976 1024 960
WIRE 1120 992 1120 960
WIRE -768 1072 -768 1040
WIRE -544 1072 -544 1040
WIRE -320 1072 -320 1040
WIRE -112 1072 -112 1040
WIRE 1024 1072 1024 1056
WIRE 1120 1072 1120 1056
WIRE -768 1184 -768 1152
WIRE -544 1184 -544 1152
WIRE -320 1184 -320 1152
WIRE -112 1184 -112 1152
WIRE 656 1184 560 1184
WIRE 1024 1200 960 1200
WIRE 1120 1200 1024 1200
WIRE 1168 1200 1120 1200
WIRE 656 1216 576 1216
WIRE 1024 1232 1024 1200
WIRE 1120 1232 1120 1200
WIRE 1024 1328 1024 1312
WIRE 1120 1328 1120 1296
WIRE 672 1440 576 1440
WIRE 1024 1456 976 1456
WIRE 1120 1456 1024 1456
WIRE 1168 1456 1120 1456
WIRE 672 1472 592 1472
WIRE 1024 1488 1024 1456
WIRE 1120 1504 1120 1456
WIRE 1024 1600 1024 1568
WIRE 1120 1600 1120 1568
WIRE 624 1712 576 1712
WIRE 1024 1728 992 1728
WIRE 1120 1728 1024 1728
WIRE 1184 1728 1120 1728
WIRE 624 1744 576 1744
WIRE 1024 1760 1024 1728
WIRE 1120 1776 1120 1728
WIRE 1024 1872 1024 1840
WIRE 1120 1872 1120 1840
FLAG 1248 368 3V3
IOPIN 1248 368 In
FLAG 1232 304 VBatt_INT
IOPIN 1232 304 In
FLAG 1632 288 VBatt_INT
IOPIN 1632 288 In
FLAG 1072 640 3V3
IOPIN 1072 640 Out
FLAG 1072 672 5V_INT
IOPIN 1072 672 Out
FLAG 592 672 VBatt_INT
IOPIN 592 672 In
FLAG 1808 384 Reed_Switch
FLAG 2240 -384 0
FLAG 2352 -384 0
FLAG 2352 -464 5V_INT
IOPIN 2352 -464 Out
FLAG 2240 -464 3V3
IOPIN 2240 -464 Out
FLAG 528 512 Reed_Switch_Enable
FLAG 640 336 Reed_Switch_Detect
FLAG 640 368 Micro-Power-On
FLAG -1904 176 3V3
IOPIN -1904 176 In
FLAG -2304 208 Water_Probe
FLAG -2128 448 0
FLAG -1536 192 Water_Sense
FLAG -1776 848 3V3
IOPIN -1776 848 In
FLAG -1792 784 CAN_RX
FLAG -1792 816 CAN_TX
FLAG -2080 848 CAN_H
FLAG -2080 816 CAN_L
FLAG -1792 -80 0
FLAG -1888 -192 Bat0_1
FLAG -1888 -320 Bat0_2
FLAG -1888 -432 Bat0_3
FLAG -1888 -544 Bat0_4
FLAG -1888 -656 Bat0_5
FLAG -1888 -752 Bat0_6
FLAG -1040 -192 Bat1_1
FLAG -1040 -320 Bat1_2
FLAG -1040 -432 Bat1_3
FLAG -1040 -544 Bat1_4
FLAG -1040 -656 Bat1_5
FLAG -1040 -752 Bat1_6
FLAG -416 -400 Bat0_6
FLAG -416 -432 Bat0_5
FLAG -416 -464 Bat0_4
FLAG -416 -496 Bat0_3
FLAG -416 -528 Bat0_2
FLAG -416 -560 Bat0_1
FLAG -416 -80 Bat1_6
FLAG -416 -112 Bat1_5
FLAG -416 -144 Bat1_4
FLAG -416 -176 Bat1_3
FLAG -416 -208 Bat1_2
FLAG -416 -240 Bat1_1
FLAG -128 -560 Bat0_1_ADC
FLAG -128 -528 Bat0_2_ADC
FLAG -128 -496 Bat0_3_ADC
FLAG -128 -464 Bat0_4_ADC
FLAG -128 -432 Bat0_5_ADC
FLAG -128 -400 Bat0_6_ADC
FLAG -128 -240 Bat1_1_ADC
FLAG -128 -208 Bat1_2_ADC
FLAG -128 -176 Bat1_3_ADC
FLAG -128 -144 Bat1_4_ADC
FLAG -128 -112 Bat1_5_ADC
FLAG -128 -80 Bat1_6_ADC
FLAG 1792 -128 Reed_Switch
FLAG 1792 -544 Reed_Switch
FLAG 1312 -544 Reed_Switch
FLAG 656 -240 3V3
IOPIN 656 -240 In
FLAG 1136 -704 3V3
IOPIN 1136 -704 In
FLAG 1616 -704 3V3
IOPIN 1616 -704 In
FLAG 1616 -288 3V3
IOPIN 1616 -288 In
FLAG 688 -272 Aux_Reed_Switch_1
FLAG 688 -304 Aux_Reed_Switch_2
FLAG 688 -336 Aux_Reed_Switch_3
FLAG -1760 -992 Batt0
IOPIN -1760 -992 Out
FLAG -912 -992 Batt1
IOPIN -912 -992 Out
FLAG 2480 -384 0
FLAG 2592 -384 0
FLAG 2592 -464 Motor_PWR
IOPIN 2592 -464 In
FLAG 2480 -464 System_PWR
IOPIN 2480 -464 In
FLAG 2720 -384 0
FLAG 2720 -464 VBatt_INT
IOPIN 2720 -464 In
FLAG 80 -800 VBatt_INT
IOPIN 80 -800 Out
FLAG -544 -832 Batt1
IOPIN -544 -832 In
FLAG -544 -864 Batt0
IOPIN -544 -864 In
FLAG 80 -832 System_PWR
IOPIN 80 -832 Out
FLAG 80 -864 Motor_PWR
IOPIN 80 -864 Out
FLAG -480 -800 Parallel_Enable
FLAG 576 1216 System_PWR
IOPIN 576 1216 In
FLAG 560 1184 12V_Enable
FLAG -768 864 VBatt_Enable
FLAG 1168 1200 12V_EXT
FLAG 1024 1328 0
FLAG 592 976 System_PWR
IOPIN 592 976 In
FLAG 592 1472 System_PWR
IOPIN 592 1472 In
FLAG 592 944 5V_Enable
FLAG 576 1440 16V_Enable
FLAG 1168 960 5V_EXT
FLAG 1168 1456 16V_EXT
FLAG 1024 1072 0
FLAG 1024 1600 0
FLAG 576 1712 Motor_PWR
IOPIN 576 1712 In
FLAG 576 1744 VBatt_Enable
FLAG 1184 1728 VBatt_EXT
FLAG 1024 1872 0
FLAG -944 -64 0
FLAG 1120 1872 0
FLAG 1120 1600 0
FLAG 1120 1328 0
FLAG 1120 1072 0
FLAG -768 1184 0
FLAG -736 1040 3V3
IOPIN -736 1040 In
FLAG -736 880 0
FLAG -544 864 16V_Enable
FLAG -544 1184 0
FLAG -512 1040 3V3
IOPIN -512 1040 In
FLAG -512 880 0
FLAG -320 864 12V_Enable
FLAG -320 1184 0
FLAG -288 1040 3V3
IOPIN -288 1040 In
FLAG -288 880 0
FLAG -112 864 5V_Enable
FLAG -112 1184 0
FLAG -80 1040 3V3
IOPIN -80 1040 In
FLAG -80 880 0
FLAG -768 672 0
FLAG -736 528 3V3
IOPIN -736 528 In
FLAG -736 368 0
FLAG -544 672 0
FLAG -512 528 3V3
IOPIN -512 528 In
FLAG -512 368 0
FLAG -320 672 0
FLAG -288 528 3V3
IOPIN -288 528 In
FLAG -288 368 0
FLAG -112 672 0
FLAG -80 528 3V3
IOPIN -80 528 In
FLAG -80 368 0
FLAG -768 352 Micro-Power-On
FLAG -544 352 Parallel_Enable
FLAG -320 352 CAN_TX
FLAG -112 368 0
DATAFLAG -1008 -752 ""
DATAFLAG -992 -656 ""
DATAFLAG -1008 -544 ""
DATAFLAG -1008 -432 ""
DATAFLAG -1008 -320 ""
DATAFLAG -1008 -192 "V(bat1_1)"
DATAFLAG -1856 -752 ""
DATAFLAG -1856 -656 ""
DATAFLAG -1856 -544 ""
DATAFLAG -1856 -432 ""
DATAFLAG -1856 -320 ""
DATAFLAG -1856 -192 ""
DATAFLAG -208 -560 ""
DATAFLAG -208 -528 ""
DATAFLAG -208 -496 ""
DATAFLAG -208 -464 ""
DATAFLAG -208 -432 ""
DATAFLAG -208 -400 ""
DATAFLAG -208 -240 ""
DATAFLAG -208 -208 ""
DATAFLAG -208 -176 ""
DATAFLAG -208 -144 ""
DATAFLAG -208 -112 ""
DATAFLAG -208 -80 ""
SYMBOL reed_switch_power 928 336 R180
SYMATTR InstName X2
SYMBOL sw 1632 272 M0
SYMATTR InstName S1
SYMATTR Value SWH
SYMBOL voltage 1808 368 R180
WINDOW 0 24 96 Left 2
WINDOW 3 -302 58 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 3.3 1 20n 20n 1)
SYMBOL INT_PWR 832 656 R0
SYMATTR InstName X3
SYMBOL res 2224 -480 R0
SYMATTR InstName R1
SYMATTR Value 33
SYMBOL res 2336 -480 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL voltage -768 1056 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -103 -170 VRight 2
WINDOW 0 -66 21 Left 2
SYMATTR Value 0
SYMATTR InstName V7
SYMBOL water_sensor -1712 192 R0
SYMATTR InstName X1
SYMBOL sw -2128 320 M180
SYMATTR InstName S2
SYMATTR Value SWH
SYMBOL voltage -2304 224 R0
WINDOW 0 24 96 Left 2
WINDOW 3 -305 53 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE(0 3.3 1 20n 20n 1)
SYMBOL res -2144 320 R0
SYMATTR InstName R3
SYMATTR Value 2000
SYMBOL CANTransceiver -1936 816 R180
SYMATTR InstName X4
SYMBOL jstcon -352 -480 R0
SYMATTR InstName X5
SYMBOL jstcon -352 -160 R0
SYMATTR InstName X6
SYMBOL sw 1616 -240 M0
SYMATTR InstName S3
SYMATTR Value SWH
SYMBOL voltage 1792 -144 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 0
SYMBOL sw 1616 -656 M0
SYMATTR InstName S4
SYMATTR Value SWH
SYMBOL voltage 1792 -560 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V21
SYMATTR Value 0
SYMBOL sw 1136 -656 M0
SYMATTR InstName S5
SYMATTR Value SWH
SYMBOL voltage 1312 -560 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V22
SYMATTR Value 0
SYMBOL reed_switch 1008 -288 R180
SYMATTR InstName X7
SYMBOL res 2464 -480 R0
SYMATTR InstName R4
SYMATTR Value 1000
SYMBOL res 2576 -480 R0
SYMATTR InstName R5
SYMATTR Value 1000
SYMBOL res 2704 -480 R0
SYMATTR InstName R8
SYMATTR Value 1000
SYMBOL res 1008 1216 R0
SYMATTR InstName R9
SYMATTR Value 10
SYMBOL 12V_EXT_noripple 800 1200 R0
SYMATTR InstName X9
SYMBOL 5V_EXT_noripple 816 960 R0
SYMATTR InstName X10
SYMBOL 16V_EXT_noripple 816 1456 R0
SYMATTR InstName X11
SYMBOL res 1008 960 R0
SYMATTR InstName R10
SYMATTR Value 10
SYMBOL res 1008 1472 R0
SYMATTR InstName R11
SYMATTR Value 23
SYMBOL res 1008 1744 R0
SYMATTR InstName R12
SYMATTR Value 1
SYMBOL cap -1808 -736 R0
SYMATTR InstName C1
SYMATTR Value =C_cell0
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -1808 -640 R0
SYMATTR InstName C2
SYMATTR Value =C_cell0
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -1808 -528 R0
SYMATTR InstName C3
SYMATTR Value =C_cell0
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -1808 -416 R0
SYMATTR InstName C4
SYMATTR Value =C_cell0
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -1808 -288 R0
SYMATTR InstName C5
SYMATTR Value =C_cell0
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -1808 -176 R0
SYMATTR InstName C6
SYMATTR Value =C_cell0
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -960 -736 R0
WINDOW 3 24 36 Left 2
SYMATTR Value =C_cell1
SYMATTR InstName C7
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -960 -624 R0
SYMATTR InstName C8
SYMATTR Value =C_cell1
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -960 -512 R0
SYMATTR InstName C9
SYMATTR Value =C_cell1
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -960 -400 R0
SYMATTR InstName C10
SYMATTR Value =C_cell1
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL cap -960 -288 R0
SYMATTR InstName C11
SYMATTR Value =C_cell1
SYMATTR SpiceLine V=30 Irms=120 Rser=ESR_cell
SYMBOL voltage -944 -176 R0
WINDOW 39 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 3 24 72 Left 2
SYMATTR SpiceLine Rser=ESR_cell
SYMATTR Value =V_cell1
SYMATTR InstName V9
SYMBOL res -1776 -816 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 0.001
SYMBOL res -928 -800 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 0.001
SYMBOL cap 1104 1776 R0
SYMATTR InstName C12
SYMATTR Value 1m
SYMBOL cap 1104 1504 R0
SYMATTR InstName C13
SYMATTR Value 100µ
SYMBOL cap 1104 1232 R0
SYMATTR InstName C14
SYMATTR Value 100µ
SYMBOL cap 1104 992 R0
SYMATTR InstName C15
SYMATTR Value 100µ
SYMBOL push_pull -736 976 R270
SYMATTR InstName X13
SYMBOL voltage -544 1056 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -87 -175 VRight 2
WINDOW 0 -66 21 Left 2
SYMATTR Value 0
SYMATTR InstName V4
SYMBOL push_pull -512 976 R270
SYMATTR InstName X14
SYMBOL voltage -320 1056 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -89 -181 VRight 2
WINDOW 0 -66 21 Left 2
SYMATTR Value 0
SYMATTR InstName V10
SYMBOL push_pull -288 976 R270
SYMATTR InstName X15
SYMBOL voltage -112 1056 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -88 -178 VRight 2
WINDOW 0 -66 21 Left 2
SYMATTR Value 0
SYMATTR InstName V11
SYMBOL push_pull -80 976 R270
SYMATTR InstName X16
SYMBOL voltage -768 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -66 49 Left 2
WINDOW 0 -66 21 Left 2
SYMATTR Value 0
SYMATTR InstName V12
SYMBOL push_pull -736 464 R270
SYMATTR InstName X17
SYMBOL voltage -544 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -67 84 Left 2
WINDOW 0 -66 21 Left 2
SYMATTR Value 0
SYMATTR InstName V13
SYMBOL push_pull -512 464 R270
SYMATTR InstName X18
SYMBOL voltage -320 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -67 84 Left 2
WINDOW 0 -66 21 Left 2
SYMATTR Value 3.3
SYMATTR InstName V14
SYMBOL push_pull -288 464 R270
SYMATTR InstName X19
SYMBOL voltage -112 544 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -67 84 Left 2
WINDOW 0 -66 21 Left 2
SYMATTR Value 0
SYMATTR InstName V15
SYMBOL push_pull -80 464 R270
SYMATTR InstName X20
SYMBOL VBatt 800 1728 R0
SYMATTR InstName X12
SYMBOL bridgecir -224 -832 R0
SYMATTR InstName X8
TEXT 1800 448 Right 2 ;Reed Switch Power
TEXT 2368 -264 Left 2 !.tran 0 10 0.01 startup
TEXT 2368 -232 Left 2 !.model SWH SW(Ron=0.0001 Roff=10Meg Vt=1.5 Vh=-.4)
TEXT -512 64 Left 2 ;Microcontroller
TEXT -2296 144 Left 2 ;Water_Probe
TEXT -480 120 Left 2 ;Outputs
TEXT 1784 -64 Right 2 ;Aux Reed Switch 1
TEXT 1784 -480 Right 2 ;Aux Reed Switch 2
TEXT 1304 -480 Right 2 ;Aux Reed Switch 3
TEXT -1640 -1048 Left 2 ;Battries
TEXT 1072 -952 Left 2 ;Aux Reed Switch
TEXT -1944 56 Left 2 ;Water Sensor
TEXT 872 56 Left 2 ;Power Internal and Power Reed Switch
TEXT -1960 632 Left 2 ;CAN Bus
TEXT -312 -640 Left 2 ;Cell Monitoring
TEXT 744 824 Left 2 ;External Power
TEXT -312 -1048 Left 2 ;Battery Management
TEXT -2256 -200 Left 2 !.ic V(Bat0_1)=V_cell0
TEXT -2352 -320 Left 2 !.ic V(Bat0_2, Bat0_1)=V_cell0
TEXT -2352 -432 Left 2 !.ic V(Bat0_3, Bat0_2)=V_cell0
TEXT -2344 -544 Left 2 !.ic V(Bat0_4, Bat0_3)=V_cell0
TEXT -2336 -664 Left 2 !.ic V(Bat0_5, Bat0_4)=V_cell0
TEXT -2328 -760 Left 2 !.ic V(Bat0_6, Bat0_5)=V_cell0
TEXT -1496 -320 Left 2 !.ic V(Bat1_2, Bat1_1)=V_cell1
TEXT -1496 -432 Left 2 !.ic V(Bat1_3, Bat1_2)=V_cell1
TEXT -1496 -544 Left 2 !.ic V(Bat1_4, Bat1_3)=V_cell1
TEXT -1496 -664 Left 2 !.ic V(Bat1_5, Bat1_4)=V_cell1
TEXT -1496 -760 Left 2 !.ic V(Bat1_6, Bat1_5)=V_cell1
TEXT -1560 -888 Left 2 ;Estimated battery capacitance = 1714 F
TEXT -1600 -120 Left 2 !.param V_cell1=4.12 C_cell1=10E3
TEXT -1600 -152 Left 2 !.param V_cell0=4.2 C_cell0=10E3
TEXT -1600 -88 Left 2 !.param ESR_cell=0.0001
RECTANGLE Normal 1504 96 1888 464 2
RECTANGLE Normal -2000 496 -2384 128 2
RECTANGLE Normal 32 1248 -944 96 2
RECTANGLE Normal 1488 -416 1872 -48 2
RECTANGLE Normal 1488 -832 1872 -464 2
RECTANGLE Normal 1008 -832 1392 -464 2
RECTANGLE Normal 384 -976 1920 -16 2
RECTANGLE Normal -1328 544 -2416 32 2
RECTANGLE Normal 1920 752 320 32 2
RECTANGLE Normal -1344 1008 -2416 608 2
RECTANGLE Normal 352 -16 -736 -1072 2
RECTANGLE Normal -2416 -16 -768 -1072 2
RECTANGLE Normal 96 1312 -992 32 2
RECTANGLE Normal 1392 1920 320 800 2
