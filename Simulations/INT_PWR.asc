Version 4
SHEET 1 2012 696
WIRE 368 -144 336 -144
WIRE 480 -144 448 -144
WIRE 480 -48 480 -144
WIRE 432 16 384 16
WIRE 1264 16 1072 16
WIRE 1072 48 1072 16
WIRE 480 64 480 32
WIRE 608 64 480 64
WIRE -224 80 -224 48
WIRE -224 80 -368 80
WIRE -96 80 -224 80
WIRE 0 80 -96 80
WIRE 480 96 480 64
WIRE -368 128 -368 80
WIRE -224 128 -224 80
WIRE -96 144 -96 80
WIRE 0 144 0 80
WIRE 432 160 416 160
WIRE 1072 160 1072 128
WIRE 480 224 480 176
WIRE -368 240 -368 208
WIRE -224 240 -224 208
WIRE -224 240 -368 240
WIRE -96 240 -96 208
WIRE -96 240 -224 240
WIRE 0 240 0 208
WIRE 0 240 -96 240
WIRE -224 256 -224 240
FLAG 608 64 5V_INT
IOPIN 608 64 Out
FLAG 336 -144 0
FLAG -224 256 0
FLAG -224 48 VBatt_INT
IOPIN -224 48 In
FLAG 432 -32 Reed_Switch_Enable
IOPIN 432 -32 In
FLAG 432 112 Reed_Switch_Enable
IOPIN 432 112 In
FLAG 384 16 0
FLAG 416 160 0
FLAG 480 224 0
FLAG 1264 16 3V3
IOPIN 1264 16 Out
FLAG 1072 160 0
SYMBOL bv 464 -144 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B1
SYMATTR Value V={if(V(VBatt_INT)>5, 5, V(VBatt_INT))}
SYMBOL bi -224 128 R0
WINDOW 3 527 205 Right 2
SYMATTR Value I={if(V(VBatt_INT) > 0, V(5V_INT)*(-1)*I(B1)/V(VBatt_INT), 0)}
SYMATTR InstName B2
SYMBOL sw 480 48 M180
SYMATTR InstName S1
SYMATTR Value SWH
SYMBOL sw 480 192 M180
SYMATTR InstName S2
SYMATTR Value SWL
SYMBOL cap -112 144 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL cap -16 144 R0
SYMATTR InstName C3
SYMATTR Value 4.7µ
SYMBOL bv 1072 32 R0
SYMATTR InstName B3
SYMATTR Value V={if(V(5V_INT)>3.3, 3.3, V(5V_INT))}
SYMBOL bi -368 128 R0
WINDOW 3 -75 38 Right 2
SYMATTR Value I=if(V(VBatt_INT) > 0, (-1)*I(B3), 0)
SYMATTR InstName B4
TEXT 176 392 Left 2 !.model SWH SW(Ron=0.0001 Roff=10Meg Vt=1.5 Vh=-.4)
TEXT 176 416 Left 2 !.model SWL SW(Ron=10Meg Roff=0.0001 Vt=1.5 Vh=-.4)
